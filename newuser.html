<!DOCTYPE html>
<!--[if lt IE 7]>

<html class="lt-ie9 lt-ie8 lt-ie7" lang="en">

<![endif]-->
<!--[if IE 7]>

<html class="lt-ie9 lt-ie8" lang="en">

<![endif]-->
<!--[if IE 8]>

<html class="lt-ie9" lang="en">

<![endif]-->
<!--[if gt IE 8]>
  <!-->

  <html lang="en">
  
  <!--
  <![endif]-->
  <head>
    <meta charset="utf-8">
    <title>
      Cycles for Change
    </title>
    <meta name="author" content="">
    <meta content="width=device-width, initial-scale=1.0, user-scalable=no" name="viewport">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
    </script>
    <link href="icomoon/style.css" rel="stylesheet">
    <!--[if lte IE 7]>
    <script src="css/icomoon-font/lte-ie7.js">
    </script>
    <![endif]-->
    <link href="css/main.css" rel="stylesheet">
    <link href="css/wysiwyg/bootstrap-wysihtml5.css" rel="stylesheet">
    <link href="css/wysiwyg/wysiwyg-color.css" rel="stylesheet">
    <link href="css/charts-graphs.css" rel="stylesheet">
    <link href="css/alertify.core.css" rel="stylesheet" id="toggleCSS">

  </head>
  <body>

    <div class="container-fluid">
      <div id="mainnav" class="hidden-phone hidden-tablet">
        <ul style="display: block;">
          <li>
            <a href="index.html">
              <div class="icon">
                <span class="fs1" aria-hidden="true" data-icon="&#xe0a0;"></span>
              </div>
              Dashboard
            </a>
          </li>
          <li class="active">
            <a href="newuser.html">
              <div class="icon">
                <span class="fs1" aria-hidden="true" data-icon="&#xe102;"></span>
              </div>
              New User
            </a>
          </li>
          <li>
            <a href="users.html">
              <div class="icon">
                <span class="fs1" aria-hidden="true" data-icon="&#xe0e2;"></span>
              </div>
              List Users
            </a>
          </li>
        </ul>
      </div>
      
      <div class="dashboard-wrapper">
        
        <div class="main-container">
          <div class="row-fluid">
            <div class="span8">
              <div class="widget">
              
                <!-- BEGIN HEADER -->
                <div class="widget-header">
                  <div class="title">
                    <span class="fs1" aria-hidden="true" data-icon="&#xe022;"></span> Registration
                  </div>
                </div>
                
                <!-- BEGIN WIDGET BODY -->
                <div class="widget-body">
                  <!-- BEGIN FORM -->
                  <form id="newuser" class="form-horizontal no-margin">
                    <!-- BEGIN NAME -->
                    <div class="control-group">
                      <label class="control-label">
                        Name
                      </label>
                      <div class="controls controls-row">
                        <input name="first_name" id="first_name" class="span6" type="text" placeholder="First Name">
                        <input name="last_name" id="last_name" class="span6 input-left-top-margins" type="text" placeholder="Last Name">
                      </div>
                    </div>

                    <!-- BEGIN ADDRESS -->
                    <div class="control-group">
                      <label class="control-label">
                        Address
                      </label>
                      <div class="controls">
                        <input name="address" id="address" class="span12" type="text" placeholder="Address">
                      </div>
                    </div>

                    <!-- BEGIN CITY & STATE -->
                    <div class="control-group">
                      <label class="control-label">
                        City and State
                      </label>
                      <div class="controls">
                        <input name="city" id="city" class="span6" type="text" placeholder="City">
                        <select id="state" class="span6">

                          <option value="" selected="selected">
                            Select a State
                          </option>

                          <option value="AL">
                            Alabama
                          </option>

                          <option value="AK">
                            Alaska
                          </option>

                          <option value="AZ">
                            Arizona
                          </option>

                          <option value="AR">
                            Arkansas
                          </option>

                          <option value="CA">
                            California
                          </option>

                          <option value="CO">
                            Colorado
                          </option>

                          <option value="CT">
                            Connecticut
                          </option>

                          <option value="DE">
                            Delaware
                          </option>

                          <option value="DC">
                            District Of Columbia
                          </option>

                          <option value="FL">
                            Florida
                          </option>

                          <option value="GA">
                            Georgia
                          </option>

                          <option value="HI">
                            Hawaii
                          </option>

                          <option value="ID">
                            Idaho
                          </option>

                          <option value="IL">
                            Illinois
                          </option>

                          <option value="IN">
                            Indiana
                          </option>

                          <option value="IA">
                            Iowa
                          </option>

                          <option value="KS">
                            Kansas
                          </option>

                          <option value="KY">
                            Kentucky
                          </option>

                          <option value="LA">
                            Louisiana
                          </option>

                          <option value="ME">
                            Maine
                          </option>

                          <option value="MD">
                            Maryland
                          </option>

                          <option value="MA">
                            Massachusetts
                          </option>

                          <option value="MI">
                            Michigan
                          </option>

                          <option value="MN">
                            Minnesota
                          </option>

                          <option value="MS">
                            Mississippi
                          </option>

                          <option value="MO">
                            Missouri
                          </option>

                          <option value="MT">
                            Montana
                          </option>

                          <option value="NE">
                            Nebraska
                          </option>

                          <option value="NV">
                            Nevada
                          </option>

                          <option value="NH">
                            New Hampshire
                          </option>

                          <option value="NJ">
                            New Jersey
                          </option>

                          <option value="NM">
                            New Mexico
                          </option>

                          <option value="NY">
                            New York
                          </option>

                          <option value="NC">
                            North Carolina
                          </option>

                          <option value="ND">
                            North Dakota
                          </option>

                          <option value="OH">
                            Ohio
                          </option>

                          <option value="OK">
                            Oklahoma
                          </option>

                          <option value="OR">
                            Oregon
                          </option>

                          <option value="PA">
                            Pennsylvania
                          </option>

                          <option value="RI">
                            Rhode Island
                          </option>

                          <option value="SC">
                            South Carolina
                          </option>

                          <option value="SD">
                            South Dakota
                          </option>

                          <option value="TN">
                            Tennessee
                          </option>

                          <option value="TX">
                            Texas
                          </option>

                          <option value="UT">
                            Utah
                          </option>

                          <option value="VT">
                            Vermont
                          </option>

                          <option value="VA">
                            Virginia
                          </option>

                          <option value="WA">
                            Washington
                          </option>

                          <option value="WV">
                            West Virginia
                          </option>

                          <option value="WI">
                            Wisconsin
                          </option>

                          <option value="WY">
                            Wyoming
                          </option>
                        </select>

                      </div>
                    </div>
                    
                    <!-- BEGIN ZIP CODE -->
                    <div class="control-group">
                      <label class="control-label">
                        Zip Code
                      </label>
                      <div class="controls">
                        <input name="zip" id="zip" class="span6" type="text" placeholder="Zip Code">
                        <span class="help-inline ">
                          Enter your Zip Code
                        </span>
                      </div>
                    </div>
                    
                    <!-- BEGIN PHONE -->
                    <div class="control-group">
                      <label class="control-label">
                        Phone
                      </label>
                      <div class="controls">
                        <input name="phone" id="phone" class="span6" type="text" placeholder="Phone">
                        <span class="help-inline ">
                          Enter your Phone Number
                        </span>
                      </div>
                    </div>
                    
                    <!-- BEGIN EMAIL -->
                    <div class="control-group">
                      <label class="control-label">
                        Email Address
                      </label>
                      <div class="controls">
                        <input type="text" name="email" id="email" class="span6" placeholder="Enter your Email Address" />
                        <span class="help-inline ">
                          Enter your Email address
                        </span>
                      </div>
                    </div>

                    <!-- BEGIN GENDER -->
                    <div class="control-group">
                      <label class="control-label">
                        Gender
                      </label>
                      <div class="controls">
                        <select id="gender" class="span6">
                          <option value="" selected="selected">
                            Select an option
                          </option>
                          <option value="female">
                            Female
                          </option>
                          <option value="male">
                            Male
                          </option>
                          <option value="transgender">
                            Transgender
                          </option>
                          <option value="other">
                            Other
                          </option>    
                          <option value="na">
                            Prefer not to say
                          </option>                              
                        </select>
                      </div>
                    </div>
                    
                    <!-- BEGIN GENDER & ETHNICITY -->
                    <div class="control-group">
                      <label class="control-label">
                        Ethnicity
                      </label>
                      <div class="controls">
                        <select id="ethnicity" class="span6">
                          <option value="" selected="selected">
                            Select an option
                          </option>
                          <option value="default">
                            List here
                          </option>
                        </select>
                      </div>
                    </div>  
                    
                    <!-- BEGIN AFFILIATION -->
                    <div class="control-group">
                      <label class="control-label">
                        Affiliation
                      </label>
                      <div class="controls">
                        <input type="text" name="affiliation" id="affiliation" class="span6" placeholder="Enter your affiliation" />
                        <span class="help-inline ">
                          Enter your affiliation
                        </span>
                      </div>
                    </div>
                    
                    <!-- BEGIN AGE -->
                    <div class="control-group">
                      <label class="control-label">
                        Age
                      </label>
                      <div class="controls">
                        <input type="text" name="age" id="age" class="span6" placeholder="Enter your age" />
                        <span class="help-inline ">
                          Enter your age
                        </span>
                      </div>
                    </div>
                    
                    <!-- BEGIN SCHOOL LUNCH -->
                    <div id="schoollunch" class="control-group" style="display:none">
                      <label class="control-label">
                        School lunch question
                      </label>
                      <div class="controls">
                        Question shows up here!
                      </div>
                    </div>
                    
                    <!-- INCOME -->
                    <div id="incomelevel" class="control-group" style="display:none">
                      <label class="control-label">
                        Household income
                      </label>
                      <div class="controls">
                        <input type="text" id="incomelevels_members" class="span6" placeholder="Number of members in your household" />
                        <select id="incomelevels_income" class="span6">
                          <option value="" selected="selected">
                            Select an option
                          </option>                               
                        </select>                      
                      </div>
                    </div>
                    
                    <!-- INTERESTS -->
                    <div id="interest" class="control-group">
                      <label class="control-label">
                        What skills or interests do you have to contribute?
                      </label>
                      <div class="controls">
                        <textarea id="interests" class="input-block-level" placeholder="Interests"></textarea>
                      </div>
                    </div>

                    <!-- REFERRED -->
                    <div id="refer" class="control-group">
                      <label class="control-label">
                        How were you referred to Cycles for Change?
                      </label>
                      <div class="controls">
                        <select id="referred" class="span6">
                          <option value="" selected="selected">
                            Select an option
                          </option>
                          <option value="website">
                            Website
                          </option>
                          <option value="friend_or_family">
                            Friend/Family
                          </option>
                          <option value="media">
                            Media
                          </option>
                          <option value="other">
                            Other
                          </option>  
                        </select>
                        <textarea id="referred_other" class="input-block-level" placeholder="If 'other', please describe here." style="display:none; margin-top: 10px;"></textarea>
                      </div>
                    </div>
              
                    <div class="form-actions no-margin">
                      <button type="submit" class="btn btn-info pull-right">
                        Register
                      </button>
                      <div class="clearfix">
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!--/.fluid-container-->
    </div>
    <footer>
      <p>
        &copy; Cycles for Change 2013
      </p>
    </footer>
    
    <!-- LOAD EXTERNAL JAVASCRIPTS -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    </script>
    <script src="js/bootstrap.js">
    </script>
    <script src="js/jquery.scrollUp.js">
    </script>
    
    <!-- Tiny Scrollbar JS -->
    <script src="js/tiny-scrollbar.js">
    </script>
    
    <script type="text/javascript" src="js/alertify.min.js">
    </script>
    
    <script type="text/javascript">
      
      //ScrollUp
      $(function () {
        $.scrollUp({
          scrollName: 'scrollUp', // Element ID
          topDistance: '300', // Distance from top before showing element (px)
          topSpeed: 300, // Speed back to top (ms)
          animation: 'fade', // Fade, slide, none
          animationInSpeed: 400, // Animation in speed (ms)
          animationOutSpeed: 400, // Animation out speed (ms)
          scrollText: 'Scroll to top', // Text for element
          activeOverlay: false, // Set CSS color to display scrollUp active point, e.g '#00FFFF'
        });
      });

      //AFTER CHANGING AGE
      $("#age").change(function(event) {
        var age = parseInt($("#newuser").find( 'input[name="age"]' ).val());
        if (age > 12) {
          $("#schoollunch").hide();
          $("#incomelevel").show();
        } else if (age > 0 && age <= 12) {
          $("#incomelevel").hide();
          $("#schoollunch").show();
        } else {
          $("#incomelevel").hide();
          $("#schoollunch").hide();
        }
      });
      
      //AFTER CHANGING HOUSEHOLD MEMBERS
      $("#incomelevels_members").change(function(event) {
        var household_members = parseInt($("#newuser").find( 'input[id="incomelevels_members"]' ).val());
        
        //REMOVE ANY EXISTING INCOME LEVEL VALUES 
        $("#incomelevels_income option[value='level1']").remove();
        $("#incomelevels_income option[value='level2']").remove();
        $("#incomelevels_income option[value='level3']").remove();
        $("#incomelevels_income option[value='level4']").remove();
        
        //__$17,600 or Less  __$17,601 - 29,350  __$29,351  44,800  __$44,801 or More
        if (household_members == 1) {
          $("#incomelevels_income").append(new Option("$17,600 or less", "level1"));
          $("#incomelevels_income").append(new Option("$17,601 to $29,350", "level2"));
          $("#incomelevels_income").append(new Option("$29,351 to $44,800", "level3"));
          $("#incomelevels_income").append(new Option("$44,801 or more", "level4"));          
        }
        //__$20,100 or Less  __$20,101 - 33,550  __$33,551 - 51,200  __$51,201 or More
        else if (household_members == 2) {
          $("#incomelevels_income").append(new Option("$20,100 or less", "level1"));
          $("#incomelevels_income").append(new Option("$20,101 to $33,550", "level2"));
          $("#incomelevels_income").append(new Option("$33,551 to $51,200", "level3"));
          $("#incomelevels_income").append(new Option("$51,201 or more", "level4"));          
        }
        //3 Members: __$22,650 or Less  __$22,651 - 37,750  __$37,751 - 57,600  __$57,601 or More
        else if (household_members == 3) {
          $("#incomelevels_income").append(new Option("$22,650 or less", "level1"));
          $("#incomelevels_income").append(new Option("$22,651 to $37,750", "level2"));
          $("#incomelevels_income").append(new Option("$37,751 to $57,600", "level3"));
          $("#incomelevels_income").append(new Option("$57,601 or more", "level4"));          
        }
        //4 Members: __$25,150 or Less  __$25,151 - 41,950  __$41,951 - 64,000  __$64,001 or More 
        else if (household_members == 4) {
          $("#incomelevels_income").append(new Option("$25,120 or less", "level1"));
          $("#incomelevels_income").append(new Option("$25,151 to $41,950", "level2"));
          $("#incomelevels_income").append(new Option("$41,951 to $64,000", "level3"));
          $("#incomelevels_income").append(new Option("$64,001 or more", "level4"));          
        }
        //5 Members: __$27,150 or Less  __$27,151 - 45,300  __$45,301 - 69,100  __$69,101 or More
        else if (household_members == 5) {
          $("#incomelevels_income").append(new Option("$27,150 or less", "level1"));
          $("#incomelevels_income").append(new Option("$27,151 to $45,300", "level2"));
          $("#incomelevels_income").append(new Option("$45,301 to $69,100", "level3"));
          $("#incomelevels_income").append(new Option("$69,101 or more", "level4"));          
        }
        //6 Members: __$29,150 or Less  __$29,151 - 48,650  __$48,651 - 74,250  __$74,251 or More
        else if (household_members == 6) {
          $("#incomelevels_income").append(new Option("$29,150 or less", "level1"));
          $("#incomelevels_income").append(new Option("$29,151 to $48,650", "level2"));
          $("#incomelevels_income").append(new Option("$48,651 to $74,250", "level3"));
          $("#incomelevels_income").append(new Option("$74,251 or more", "level4"));          
        }  
        //7 Members: __$31,200 or Less  __$31,201 - 52,000  __$52,001 - 79,350  __$79,351 or More
        else if (household_members == 7) {
          $("#incomelevels_income").append(new Option("$31,200 or less", "level1"));
          $("#incomelevels_income").append(new Option("$31,201 to $52,000", "level2"));
          $("#incomelevels_income").append(new Option("$52,001 to $79,350", "level3"));
          $("#incomelevels_income").append(new Option("$79,351 or more", "level4"));          
        }
        //8 Members: __$33,200 or Less  __$33,201 - 55,350  __$55,351 - 84,500  __$84,501 or More
        else if (household_members >= 8) {
          $("#incomelevels_income").append(new Option("$33,200 or less", "level1"));
          $("#incomelevels_income").append(new Option("$33,201 to $55,350", "level2"));
          $("#incomelevels_income").append(new Option("$55,351 to $84,500", "level3"));
          $("#incomelevels_income").append(new Option("$84,501 or more", "level4"));          
        }  
                          
      });
      
      //IF REFERRED BY OTHER, EXPOSE THE TEXTAREA
      $("#referred").change(function(event) {
        if ($("#newuser").find( 'select[id="referred"]' ).val() == "other") {
          $("#referred_other").show();
        } else {
          $("#referred_other").hide();
        }
      });

      reset = function () {
        $("toggleCSS").href = "css/alertify.core.css";
        alertify.set({
          labels: {
            ok: "OK",
            cancel: "Cancel"
          },
          delay: 5000,
          buttonReverse: false,
          buttonFocus: "ok"
        });
      };
      
      $("#newuser").submit(function(event) {
        event.preventDefault();
        //RETRIEVE THE FORM VALUES
        var $form = $( this ),
            first_name = $form.find( 'input[name="first_name"]' ).val(),
            last_name = $form.find( 'input[name="last_name"]' ).val(),
            address = $form.find( 'input[name="address"]' ).val(),
            city = $form.find( 'input[name="city"]' ).val(),
            email = $form.find( 'input[name="email"]' ).val(),
            zip = $form.find( 'input[name="zip"]' ).val(),
            state = $form.find( 'select[id="state"]' ).val(),
            phone = $form.find( 'input[name="phone"]' ).val(),
            gender = $form.find( 'select[id="gender"]' ).val(),
            ethnicity = $form.find( 'select[id="ethnicity"]' ).val(),
            age = $form.find( 'input[name="age"]' ).val(),
            affiliation = $form.find( 'input[name="affiliation"]' ).val(),
            interests = $form.find( 'textarea[id="interests"]' ).val(),
            referred = $form.find( 'select[id="referred"]' ).val(),
            referred_other = $form.find( 'textarea[id="referred_other"]' ).val(),
            incomelevels_members = $form.find( 'input[id="incomelevels_members"]' ).val(),
            incomelevels_income = $form.find( 'select[id="incomelevels_income"]' ).val(),
            url = "https://thawing-mesa-1192.herokuapp.com/user/new";

        //POST TO OUR API
        var posting = $.post( url, { 
          'first_name' : first_name,
          'last_name' : last_name,
          'address' : address,
          'city' : city,
          'state' : state,
          'zip' : zip,
          'email' : email,
          'phone' : phone,
          'gender' : gender,
          'ethnicity' : ethnicity,
          'age' : age,
          'affiliation' : affiliation,
          'interests' : interests,
          'referred' : referred,
          'referred_other' : referred_other,
          'incomelevels_members' : incomelevels_members,
          'incomelevels_income' : incomelevels_income,
        } );
       
        //PROCESS THE COMPLETED FORM
        posting.done(function( data ) {
          reset();
          alertify.success("User added!");
          $("#newuser")[0].reset();
        });
      });

      //Tabs
      $('#myTab a').click(function (e) {
        e.preventDefault();
        $(this).tab('show');
      })

      </script>
      
      
    </body>
    </html>